# JavaScript 设计模式

## 第1章 介绍

* 编写易于维护的代码，其中一个最重要的方面是能够找到代码中重复出现的主题并优化它们。  

## 第2章 什么是模式

* 模式是一种可复用的解决方案，可用于解决软件设计中遇到的常见问题。  

* 设计模式有三大好处：  
  1. 模式是已经验证的解决方案。  
  2. 模式很容易被复用。  
  3. 模式富有表达力。  

* 模式无法解决所有的设计问题，也无法取代优秀软件设计师的工作，但模式确实能够支持这些工作。  

* 模式的其他优点：  
  * 复用模式有助于防止在应用程序开发过程中小问题引发大问题。  
  * 模式可以提供通用的解决方案，并且其记录方式不需要与某个特定问题挂钩。  
  * 某些模式确实能够通过避免代码复用来减少代码的总体资源占用量。  
  * 模式添加到开发人员的词汇中，会使沟通更快速。  
  * 经常使用的模式可以逐步改进，因为其他开发人员适用这些模式后总结出的共同经验又贡献给了设计模式社区。  

## 第3章 模式状态测试、Proto模式及三法则

* 并不是每一种算法、最佳实践或解决方案都代表一种完整的模式。  

* 原始模式（proto-pattern）：一种尚未通过“模式”测试的设计模式。  

## 第4章 设计模式的结构

* 一种设计模式应该包括：  
  * 模式名称  
  * 描述  
  * 上下文大纲  
    模式在上下文中有效，以满足用户的需求。  
  * 问题描述  
    问题的陈述已解决，因此我们可以理解模式的意图。  
  * 解决方案  
    以可理解的步骤和看法解决用户问题的描述。  
  * 设计  
    模式设计的描述，特别是与它交互的用户行为。  
  * 实现  
    有关如何实现模式的指导。  
  * 插图  
    模式中类的可视表示（如图表）。  
  * 示例  
    最小形式的模式实现。  
  * 辅助条件  
    需要哪些其他模式来支持所描述模式的使用。  
  * 关系  
    这种模式像哪些模式？它是否极力模仿其他模式？  
  * 已知用法  
    是广泛使用的模式？如果是这样，在哪里使用？如何使用？  
  * 讨论  
    团队或者作者对该模式所带来巨大好处的想法。  

## 第5章 编写设计模式

* 没有交互和明确规则的解决方案就不是模式。  

## 第6章 反模式

* 如果我们认为一种模式代表一种最佳实践，那么一种反模式就代表我们已经学到的教训。  

* 反模式这个术语是1995年由 **安德鲁·凯尼格** 在当年的11月 C++ 报告中创造的。  
* 在 **凯尼格** 的报告中，他提出了反模式的两个概念：  
  * 描述一种针对某个特定问题的不良解决方案，该方案会导致糟糕的情况发生；  
  * 描述如何摆脱前述的糟糕情况以及如何创造好的解决方案。  

## 第7章 设计模式类别

* 设计模式中的三种类别以及一部分这些类别的设计模式示例：  
  1. 创建型设计模式  
    创建型设计模式专注于处理对象创建机制，以适合给定情况的方式来创建对象。  
      * Constructor （构造器）  
      * Factory （工厂）  
      * Abstract （抽象）  
      * Prototype （原型）  
      * Singleton （单例）  
      * Builder （生成器）  
  2. 结构型设计模式  
    结构型模式与对象组合有关，通常可以用于找出在不同对象之间建立关系的简单方法。  
      * Decorator （装饰者）  
      * Facade （外观）  
      * Flyweight （享元）  
      * Adapter （适配器）  
      * Proxy （代理）  

  3. 行为设计模式  
    行为设计模式专注于改善或简化系统中不同对象之间的通信。  
      * Iterator （迭代器）  
      * Mediator （中介者）  
      * Observer （观察者）  
      * Visitor （访问者）  

## 第8章 设计模式分类

## 第9章 JavaScript 设计模式

### 9.1 Constructor（构造器）模式

* 通过在构造器前面加 new 关键字，告诉 JavaScript 像使用构造器一样实例化一个新对象，并且对象成员由该函数定义。  

* 在构造器内，关键字 this 引用新创建的对象。  

* 调用 JavaScript 构造器创建一个对象后，新对象就会具有构造器原型的所有属性。  

### 9.2 Module（模块）模式

* 在 JavaScript 中，有几种用于实现模块的方法：  
  * 对象字面量表示法  
  * Module 模式  
  * AMD 模块  
  * CommonJS 模块  
  * ECMAScript Harmony 模块  

* Module 模式使用闭包封装“私有”状态和组织。  

* Module 模式的缺点：由于我们访问公有和私有成员的方式不同，当我们想改变可见性时，实际上我们必须要修改每一个曾经使用过该成员的地方。  

* 其他缺点包括：无法为私有成员创建自动化单元测试，bug需要修正补丁时会增加额外的复杂性。  

* Revealing Module (揭示模块)模式：能够在私有范围内简单定义所有的函数和变量，并返回一个匿名函数，它拥有指向私有函数的指针，该函数是他希望展示为公有的方法。  

* 缺点：如果一个私有函数引用一个共有函数，在需要打补丁时，共有函数是不能被覆盖的。  





