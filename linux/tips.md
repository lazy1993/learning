# LINUX 学习

* `linux` 权限标识：第一位是文件类型，后面每三位一组，分别代表所有者、所属组和其他人的权限。
```bash
  -rw-r--r--  
    * - 文件类型（常用： - 文件 d 目录 | 软链接文件）
    * rw- u 所有者  
    * r-- g 所属组  
    * r-- o 其他人  
```  

* `linux` 文件权限有三种：r（读）、w（写）、x（执行）  

* 常用目录的作用  
  > / 根目录  
  > /bin 命令保存目录（普通用户就可以读取的命令）  
  > /boot 启动目录，启动相关文件  
  > /dev 设备文件保存目录  
  > /etc 配置文件保存目录  
  > /home 普通用户的家目录  
  > /lib 系统库保存目录  
  > /mnt 系统挂载目录（挂载光盘、U盘等）  
  > /media 挂载目录  
  > /root 超级用户的家目录  
  > /tmp 临时目录  
  > /sbin 命令保存目录（超级用户才可以使用的目录）  
  > /proc 不应该直接操作 保存的是内存的过载点 直接写入内存  
  > /sys 不应该直接操作 保存的是内存的过载点 直接写入内存  
  > /usr 系统软件资源目录  
  >> /usr/bin/ 系统命令（普通用户）  
  >> /usr/sbin/ 系统命令（超级用户）  
  > /var 系统相关文档内容  

## 文件处理命令  
* 查询目录中的内容：  
  > `ls` [选项] [文件或目录]  
  >> 选项：  
    -a 显示所有文件，包括隐藏文件  
    -l 显示详细信息（`ll` 和 `ls -l` 完全相同）  
    -d 查看目录属性  
    -h 人性化显示文件大小  
    -i 显示 `inode`  

* 建立目录：  
  > `mkdir` [选项] [目录名]  
  >> 选项：  
    -p 递归创建  

* 切换目录：  
  > `cd` [目录名]  
  >> 简化操作：  
    `cd ~` 进入当前用户的家目录  
    `cd` 进入当前用户的家目录  
    `cd -` 进入上次目录  
    `cd ..` 进入上一级目录  
    `cd .` 进入当前目录  

* 查询所在目录位置  
  > `pwd`  

* 删除目录  
  > `rmdir` [目录名]  
  >> 说明：只能删除空目录，很少用  

* 删除文件或目录：  
  > `rm` [选项] [文件或目录]  
  ***删除之前必须慎重，无法撤销，而且支持 `rm -rf /` 命令，能够将系统整个删除***  
  >> 选项：  
    -r （支持）删除目录  
    -f 强制删除  

* 复制命令：  
  > `cp` [选项] [原文件或目录] [目标目录]  
  >> 选项：  
    -r （支持）复制目录  
    -p 同时复制文件属性  
    -d （如果是链接文件）同时复制链接属性  
    -a 相当于 -pdr  

* 剪切或改名命令（同文件夹剪切就是改名）：  
  > `mv` [原文件或目录] [目标目录]  
  >> 选项：  
    -r （支持）复制目录  
    -p 同时复制文件属性  
    -d （如果是链接文件）同时复制链接属性  
    -a 相当于 -pdr  

* 链接命令：  
  > `ln` [选项] [原文件] [目标文件]  
  >> 选项：  
    -s 创建软链接  
        硬链接特征：
          1、拥有相同的i节点和存储block块，可以看作是同一个文件  
          2、可通过i节点识别  
          3、不能跨分区  
          4、不能针对目录使用  
        软链接特征：
          1、类似 `Windows` 快捷方式  
          2、软链接拥有自己的 I 节点和 Block 块，但是数据块中只保存原文件的文件名和 I 节点号，并没有实际的文件数据  
          3、软链接的文件权限都为 `lrwxrwxrwx`  
          4、修改任意文件，另一个都改变  
          5、删除原文件，软链接不能使用  
          6、原文件一定要使用绝对路径  

## 文件搜索命令  

* `locate` [文件名]：在后台数据库中（并不是直接在系统中）按文件名搜索，搜索速度快  
  * `locate` 命令所搜索的后台数据库为 `/var/lib/mlocate`（并不是每台机都是这个，看自己实际情况），并不是实时更新，大概1天更新一次  
  * 直接执行 `updatedb` 可以更新该后台数据库  
  * 该后台数据库的配置文件为 `/etc/updatedb.conf`  
        PRUNE_BIND_MOUNTS = "yes"  
        # 配置生效  
        PRUNEFS  
        # 搜索时，不搜索的文件系统  
        PRUNENAMES  
        # 搜索时，不搜索的文件类型  
        PRUNEPATHS  
        # 搜索时，不搜索的路径  

* `whereis` [选项] [命令名]：搜索命令的命令  
  > 搜索命令所在路径及帮助文档所在位置  
  >> 选项：  
    -b 只查找可执行文件  
    -m 只查找帮助文件  

* `which` [命令名]：搜索命令的命令  
  > 搜索命令所在路径及别名  

* `find` [搜索范围] [搜索条件]：最强大的搜索命令  
  * 避免大范围搜索，会非常耗费系统资源  
  * `find` 是在系统当中搜索完全符合条件的文件名（可以使用通配符，使用通配符时将文件名用引号包裹，避免通配符被识别错误）。  

      Linux中的通配符：  

        *  匹配任意内容  
        ?  匹配任意一个字符  
        [] 匹配任意一个中括号中的字符  

      搜索条件：  

        -name [文件名]  按文件名  
        -iname [文件名] 按文件名，且不区分大小写  
        -user [所有者]  按所有者  
        -nouser [所有者]查找没有所有者的文件  
        -mtime [时间]   修改文件内容时间，默认单位是天，但是也可以配置为分钟  
        # 例如：  
          +10 十天前修改
          -10 十天内修改
          10  十天前当天修改
        -atime [时间]   文件访问时间  
        -ctime [时间]   文件属性改变时间  
        -size [文件大小] 按文件大小  
        # 例如：  
          +25K 大于25KB的文件  
          -25K 小于25KB的文件  
          25K  等于25KB的文件  
        -inum [i节点] 查找指定i节点的文件  
        -a and 逻辑与，两个条件都满足  
        # 例如：  
          find /etc -size +20k -a -size -50k  
          # 查找 /etc 目录下，大于20KB并且小于50KB的文件  
        -o or 逻辑或，两个条件满足一个即可  
        # 例如：  
          find /etc -size -20k -o -size +50k  
          # 查找 /etc 目录下，小于20KB或者大于50KB的文件  
        -exec [命令] {} \; 对搜索结果执行操作  
        # 例如：  
          find /etc -size +20k -a -size -50k -exec ls -lh {} \;  
          # 查找 /etc 目录下，大于20KB并且小于50KB的文件，并显示详细信息  

* `grep` [选项] [字符串] [文件名] 搜索字符串命令  
  > 在文件当中匹配符合条件的字符串  
  >> 选项：  
    -i 忽略大小写  
    -v 排除指定字符串  

## 帮助命令 man  

* `man [命令]` 获取指定命令的帮助  

* `man` 的级别  
  * 1 ：查看命令的帮助  
  * 2 ：查看可被内核调用的函数的帮助  
  * 3 ：查看函数和函数库的帮助  
  * 4 ：查看特殊文件的帮助（主要是 `/dev` 目录下的文件）  
  * 5 ：查看配置文件的帮助  
  * 6 ：查看游戏的帮助  
  * 7 ：查看其他杂项的帮助  
  * 8 ：查看系统管理员可用命令的帮助  
  * 9 ：查看和内核相关文件的帮助  

* `man -f` 相当于 `whatis` 命令  

* `man -k` 相当于 `apropos` 命令  

* `[命令] --help` 查看该命令选项的帮助  

* `help` 获取 `shell` 内部命令的帮助  
  > 可以使用 `whereis` 确定是否是内部命令  

* `info` 命令（更详细的说明文档）  
  * - 回车： 进入子帮助页面（带有*号标记）  
  * - u：    进入上层页面  
  * - n:     进入下一个帮助小节  
  * - p：    进入上一个帮助小节  
  * - q：    退出 

## 压缩与解压缩

* 常用压缩格式： .zip .gz .bz2 .tar.gz .tar.bz2  

* .zip 格式在 Windows 和 Linux 能够通用  

* .gz 格式是 Linux 专有格式，但是 Windows 能够进行解压缩  

* .rar 格式是 Windows 专有格式，Linux 无法进行解压缩  

* zip 压缩文件名 源文件  
        # 压缩文件  

* zip -r 压缩文件名 源文件  
        # 压缩文件夹  

* unzip 压缩文件  
        # 解压缩  

* gzip 源文件  
        # 压缩为 .gz 格式的压缩文件，源文件会消失  

* gzip -c 源文件 > 压缩文件  
        # 变向在保存源文件的情况下，将文件压缩为 .gz 格式的压缩文件  
        # -c 将压缩结果输出到屏幕上，源文件没有任何改动  
        # > 将命令的结果写入指定文件  

* gzip -r 目录  
        # 压缩目录下所有的子文件，但是不能压缩目录（压缩目录很不方便）  

* gzip -d [压缩文件名]（或者 gunzip [压缩文件名] ）  
        # 解压缩  

* bzip2 [源文件]  
        # 压缩为 .bz2 格式，不保留源文件  

* bzip2 -k [源文件]  
        # 压缩为 .bz2 格式，保留源文件  

* bzip2 命令不能压缩目录  


* bzip2 -d [压缩文件]  
        # 解压缩，-k 保留压缩文件  

* bunzip2 [压缩文件]  

        # 解压缩，-k 保留压缩文件  

* tar [选项] [打包文件名] [源文件]  
  > 选项：  
    -c 打包  
    -x 解包（或者是解压缩）（ -C [目标路径] 指定解压缩位置 ）  
    -v 显示过程  
    -f 指定打包后的文件名  
    -z 压缩为 .tar.gz 格式  
    -j 解压缩 .tar.bz2 格式  
    -t 只查看但是不解压  



## 关机与重启

* logout  
  > 退出登录（不登出则一直占用一个连接数，达到最大连接数则需要重启服务器）  

* shutdown [选项] [时间]  
  > 选项：  
  -c 取消前一个关机命令  
  -h 关机（避免使用，一般没有条件进行开机操作）  
  -r 重启  

* 其他关机命令（均不太安全）  
  * halt  
  * poweroff  
  * init 0  

* 其他重启命令  
  * reboot  
  * init 6  

* 系统运行级别  
  * 0  关机  
  * 1  单用户  
  * 2  不完全多用户，不含NFS服务  
  * 3  完全多用户  
  * 4  未分配  
  * 5  图形界面  
  * 6  重启  

## 其他常用命令

* mount 查询系统中已经挂载的设备  

* mount -a 依据配置文件中 /etc/fstab 的内容，自动挂载  

* umount [设备名或挂载点] 卸载设备（必须卸载）  

* w 查看登录用户信息（who 查看登录用户简略信息）  

* last 查询当前登录和过去登录的用户信息  
  > last 命令默认是读取 /var/log/wtmp 文件数据  
  > 该文件是使用二进制保存，只能用 last 命令读取，直接修改会导致显示出来的东西不正确  


## shell

* shell的分类：Bourne Shell、C Shell  
  > Shell的两种主要语法类型有Bourne和C，这两种语法彼此不兼容。  
  > Bourne家族主要包括sh、ksh、Bash（Linux中的标准Shell）、psh、zsh；
  > C家族主要包括：csh、tcsh。（主要是unix使用）  

* echo [选项] [输出内容] 将指定内容输出到屏幕上  
  > 选项：  
    * -e 支持反斜线控制的字符转换  

* chmod 755 [脚本文件名] 给脚本执行权限  

### bash 命令

* alias 列出系统全部别名  

* alias [别名]='[原操作]' 设置别名，系统重启后失效  

* vi ~/.bashrc 写入环境变量配置文件（永久配置别名）  
  > 下次启动才会生效，如果想立即生效，使用：source ~/.bashrc 命名  

* unalias [别名] 删除别名（临时删除）  

* 命令生效顺序  
  1. 绝对路径或相对路径执行的命令  
  2. 别名  
  3. Bash 的内部命令  
  4. 按照 $PATH 环境变量定义的目录查找顺序找到的第一个命令  

### 输出重定向

* 标准输入输出：  
    | 设备 | 设备文件名 | 文件描述符 | 类型 |
    | :-: | :-: | :-:   | :-:               |
    | 键盘 | /dev/stdin | 0  | 标准输入 |
    | 显示器 | /dev/sdtout | 1  | 标准输出 |
    | 显示器 | /dev/sdterr | 2  | 标准错误输出 |  

* 输出重定向：  
    | 类型 | 符号 | 作用 |
    | :-: | :-: | :-   |
    | 标准输出重定向 | 命令 > 文件 | 以覆盖的方式，把命令的正确输出输出到指定的文件或设备当中 |
    | 标准输出重定向 | 命令 >> 文件 | 以追加的方式，把命令的正确输出输出到指定的文件或设备当中 |
    | 标准错误输出重定向 | 错误命令 2> 文件 | 以覆盖的方式，把命令的错误输出输出到指定的文件或设备当中 |
    | 标准错误输出重定向 | 错误命令 2>> 文件 | 以覆盖的方式，把命令的错误输出输出到指定的文件或设备当中 |
    | 正确输出和错误输出同时保存 | 命令 > 文件 2>&1 | 以覆盖的方式，把正确输出和错误输出都保存到同一个文件中 |
    | 正确输出和错误输出同时保存 | 命令 >> 文件 2>&1 | 以追加的方式，把正确输出和错误输出都保存到同一个文件中 |
    | 正确输出和错误输出同时保存 | 命令 &> 文件 | 以覆盖的方式，把正确输出和错误输出都保存到同一个文件中 |
    | 正确输出和错误输出同时保存 | 命令 &>> 文件 | 以追加的方式，把正确输出和错误输出都保存到同一个文件中 |
    | 正确输出和错误输出同时保存 | 命令 >> 文件1 2>> 文件2 | 把正确的输出追加到文件1中，把错误的输错追加到文件2中 |
  

* 输入重定向：使用 `<` 和 `<<`。  

### 管道符

* 多命令顺序执行：  
    | 多命令执行符 | 格式 | 作用 |
    | :-: | :-: | :-   |
    | ; | 命令1 ; 命令2 | 多个命令顺序执行，命令之间没有任何逻辑联系 |
    | && | 命令1 && 命令2 | 逻辑与，第二个命令是否执行与第一个命令执行结果相关 |
    | \|\| | 命令1 \|\| 命令2 | 逻辑或，第二个命令是否执行与第一个命令执行结果相关 |  
    | \| | 命令1 \| 命令2 | 命令1的正确输出作为命令2的操作对象 |  

