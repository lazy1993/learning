# 一套HTML和JavaScript支撑不同CSS

> 需求是有两套系统，使用基本相同的功能，但是完全不同的CSS。两套系统都需求不断开发，且需要
同时部分上线。所以先做一套，然后复制代码修改CSS的做法会导致后续升级时需要重复开发。所以想法
是能够在一套代码上开发，根据不同的打包方式打包不同的CSS，但是代码是写死的。  

## 问题背景
最近接到一个新项目，项目有一个特点：项目需要上线两套系统，这两套系统90%以上功能相同，但是
样式完全不同。这种情况有两种解决方案：先开发完成一套，复制代码然后修改CSS生成第二套代码；
在一套代码里面同时写两套系统的代码，通过打包时的参数控制打包不同CSS及部分差异化HTML。  

## 方案分析
首先我们看第一个方案。第一个方案其实是最方便的，不需要配置，而且两个项目完全分离，后续互相
升级都方便。但是这个方案也有很多缺点：1、第二套系统等第一套测试完成再开发是最合适的，
这样第二套系统的开发时间就太短了，很考验项目把控能力；2、后续有任何的功能升级，需要同时修改
两套系统，重复工作会随着迭代的进行越来越多；  
第二套方案的优点是：1、最大限度的复用公共代码；2、后续bug修复、性能优化、需求变更等要求均能
很方便的实现。缺点是：1、很难实现两套代码写在一起并且分开打包；2、如果后续两套系统功能差异
越来越大，维护起来比分开写两套代码更麻烦。  
结合实际情况：代码需要同步部分上线，不能等待一套代码开发完成再开发另一套，我决定使用第二套方案。  

## 实现解决方案
现在问题就在于如何能够在一套代码中，只使用不同的打包命令来生成两套代码？  
这个问题，我首先想到的是git分支。两套代码对应的源文件在两个分支上，第一个分支正常开发，
第二个分支同步第一个分支并修改其他不同的部分。


